<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mr. K's Money Skills Studio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      touch-action: none;
      margin: 0;
    }
    
    #tubes-canvas {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      overflow: hidden;
      z-index: 0;
    }
    
    #app-container {
      position: relative;
      z-index: 1;
      min-height: 100vh;
    }
    
    .icon { width: 1.25rem; height: 1.25rem; flex-shrink: 0; }
    .icon-sm { width: 1rem; height: 1rem; }
    .icon-lg { width: 1.5rem; height: 1.5rem; }
    .menu-icon { width: 32px; height: 32px; object-fit: contain; }
    .menu-svg-icon { width: 32px; height: 32px; }
    .icon-button { display: inline-flex; align-items: center; gap: 0.35rem; }
    
    .receipt-image { max-width: 100%; height: auto; border-radius: 0.75rem; border: 1px solid #334155; margin-bottom: 1rem; }
    .receipt-card { background: #1e293b; border: 1px solid #334155; border-radius: 1rem; padding: 1.5rem; margin-bottom: 1.5rem; }
    .receipt-card h3 { color: #a5b4fc; font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; }
    .question-list { list-style: none; padding: 0; margin: 0 0 1rem 0; }
    .question-list li { margin-bottom: 1rem; }
    .question-list p { color: #f1f5f9; font-weight: 500; margin-bottom: 0.5rem; }
    .options { display: flex; flex-direction: column; gap: 0.5rem; }
    .options label { display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1rem; background: #334155; border-radius: 0.5rem; color: #e2e8f0; cursor: pointer; transition: background 0.2s; }
    .options label:hover { background: #475569; }
    .options input[type="radio"] { accent-color: #10b981; width: 1.1rem; height: 1.1rem; }
    .options label.correct { background: #065f46 !important; border: 2px solid #10b981; }
    .options label.incorrect { background: #7f1d1d !important; border: 2px solid #f87171; }
    .check-receipt { display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.75rem 1.5rem; border-radius: 9999px; background: #10b981; color: #0f172a; font-weight: 600; font-size: 0.875rem; border: none; cursor: pointer; transition: background 0.2s; }
    .check-receipt:hover { background: #34d399; }
    .check-receipt:disabled { opacity: 0.5; cursor: not-allowed; }
    .receipt-feedback { margin-top: 1rem; padding: 1rem; border-radius: 0.5rem; font-weight: 600; }
    .receipt-feedback.success { background: #065f46; color: #6ee7b7; }
    .receipt-feedback.partial { background: #78350f; color: #fcd34d; }
    .receipt-feedback.error { background: #7f1d1d; color: #fca5a5; }
  </style>
</head>
<body class="min-h-screen text-slate-50 flex flex-col">

  <canvas id="tubes-canvas"></canvas>

  <div id="app-container">

  <!-- SVG Icon Definitions -->
  <svg xmlns="http://www.w3.org/2000/svg" class="hidden">
    <defs>
      <symbol id="icon-coin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="9"/>
        <path d="M14.5 9.5c-.5-.5-1.5-1-2.5-1s-2 .5-2.5 1.5.5 2 2.5 2.5 3 1 2.5 2.5-1.5 1.5-2.5 1.5-2-.5-2.5-1"/>
        <path d="M12 6.5v1.5m0 8v1.5"/>
      </symbol>
      <symbol id="icon-bill" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <rect x="2" y="6" width="20" height="12" rx="2"/>
        <circle cx="12" cy="12" r="3"/>
        <path d="M6 12h.01M18 12h.01"/>
      </symbol>
      <symbol id="icon-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M20 6L9 17l-5-5"/>
      </symbol>
      <symbol id="icon-x" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 6L6 18M6 6l12 12"/>
      </symbol>
      <symbol id="icon-refresh" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
        <path d="M21 3v5h-5"/>
        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
        <path d="M3 21v-5h5"/>
      </symbol>
      <symbol id="icon-hint" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 18h6M10 22h4"/>
        <path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"/>
      </symbol>
      <symbol id="icon-trophy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
        <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
        <path d="M4 22h16"/>
        <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
        <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
        <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
      </symbol>
      <symbol id="icon-target" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"/>
        <circle cx="12" cy="12" r="6"/>
        <circle cx="12" cy="12" r="2"/>
      </symbol>
      <symbol id="icon-wallet" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"/>
        <path d="M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"/>
      </symbol>
      <symbol id="icon-user" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="8" r="4"/>
        <path d="M20 21a8 8 0 1 0-16 0"/>
      </symbol>
      <symbol id="icon-receipt" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"/>
        <path d="M8 7h8M8 11h8M8 15h5"/>
      </symbol>
      <symbol id="icon-cart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="8" cy="21" r="1"/>
        <circle cx="19" cy="21" r="1"/>
        <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/>
      </symbol>
    </defs>
  </svg>

  <!-- Header with banner -->
  <header class="w-full bg-slate-900/90 border-b border-slate-800 backdrop-blur-sm">
    <div class="max-w-6xl mx-auto px-4 py-4 flex justify-center">
      <img src="https://atp-resources.github.io/assets/money/money-skills-banner.png%20(2).png" alt="Mr. K's Money Skills Studio" class="max-w-full h-auto" />
    </div>
  </header>

  <main class="flex-1 max-w-6xl mx-auto px-4 pb-10 pt-4">
    <!-- SPA Dashboard / Main Menu -->
    <section id="spa-menu" data-view="menu" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg backdrop-blur-sm">
      <div class="flex items-center gap-2 mb-4">
        <div class="p-1.5 bg-emerald-500/20 rounded-lg">
          <svg class="icon text-emerald-400"><use href="#icon-wallet"/></svg>
        </div>
        <h2 class="text-xl sm:text-2xl font-semibold text-emerald-300">Choose an Activity</h2>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <button type="button" class="spa-nav-card bg-slate-800/90 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 hover:bg-slate-700 hover:border-emerald-500 transition cursor-pointer backdrop-blur-sm" data-view-target="quick-practice">
          <div class="p-3 bg-white rounded-xl flex-shrink-0">
            <svg class="menu-svg-icon text-blue-600"><use href="#icon-target"/></svg>
          </div>
          <div class="text-left">
            <p class="font-semibold text-slate-50 text-base">Quick Practice</p>
            <p class="text-sm text-slate-400">Identify coins and bills.</p>
          </div>
        </button>

        <button type="button" class="spa-nav-card bg-slate-800/90 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 hover:bg-slate-700 hover:border-emerald-500 transition cursor-pointer backdrop-blur-sm" data-view-target="match-portrait">
          <div class="p-3 bg-white rounded-xl flex-shrink-0">
            <svg class="menu-svg-icon text-purple-600"><use href="#icon-user"/></svg>
          </div>
          <div class="text-left">
            <p class="font-semibold text-slate-50 text-base">Match the Portrait</p>
            <p class="text-sm text-slate-400">Match faces to bills.</p>
          </div>
        </button>

        <button type="button" class="spa-nav-card bg-slate-800/90 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 hover:bg-slate-700 hover:border-emerald-500 transition cursor-pointer backdrop-blur-sm" data-view-target="receipt-quiz">
          <div class="p-3 bg-white rounded-xl flex-shrink-0">
            <svg class="menu-svg-icon text-indigo-600"><use href="#icon-receipt"/></svg>
          </div>
          <div class="text-left">
            <p class="font-semibold text-slate-50 text-base">Reading Receipts</p>
            <p class="text-sm text-slate-400">Answer questions about receipts.</p>
          </div>
        </button>

        <button type="button" class="spa-nav-card bg-slate-800/90 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 hover:bg-slate-700 hover:border-emerald-500 transition cursor-pointer backdrop-blur-sm" data-view-target="payment-simulator">
          <div class="p-3 bg-white rounded-xl flex-shrink-0">
            <img src="https://atp-resources.github.io/assets/money/assets/icons/cash-register-icon.png" class="menu-icon" alt="">
          </div>
          <div class="text-left">
            <p class="font-semibold text-slate-50 text-base">Payment Simulator</p>
            <p class="text-sm text-slate-400">Pay with bills and coins.</p>
          </div>
        </button>

        <button type="button" class="spa-nav-card bg-slate-800/90 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 hover:bg-slate-700 hover:border-emerald-500 transition cursor-pointer backdrop-blur-sm" data-view-target="atm-simulator">
          <div class="p-3 bg-white rounded-xl flex-shrink-0">
            <img src="https://atp-resources.github.io/assets/money/assets/icons/atm-machine-icon.png" class="menu-icon" alt="">
          </div>
          <div class="text-left">
            <p class="font-semibold text-slate-50 text-base">ATM Simulator</p>
            <p class="text-sm text-slate-400">Deposits and withdrawals.</p>
          </div>
        </button>

        <button type="button" class="spa-nav-card bg-slate-800/90 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 hover:bg-slate-700 hover:border-emerald-500 transition cursor-pointer backdrop-blur-sm" data-view-target="shopping-game">
          <div class="p-3 bg-white rounded-xl flex-shrink-0">
            <svg class="menu-svg-icon text-pink-600"><use href="#icon-cart"/></svg>
          </div>
          <div class="text-left">
            <p class="font-semibold text-slate-50 text-base">Shopping Game</p>
            <p class="text-sm text-slate-400">Stay on budget.</p>
          </div>
        </button>

        <button type="button" class="spa-nav-card bg-slate-800/90 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 hover:bg-slate-700 hover:border-emerald-500 transition cursor-pointer backdrop-blur-sm" data-view-target="debit-trainer">
          <div class="p-3 bg-white rounded-xl flex-shrink-0">
            <img src="https://atp-resources.github.io/assets/money/assets/icons/debit-card.png" class="menu-icon" alt="">
          </div>
          <div class="text-left">
            <p class="font-semibold text-slate-50 text-base">Debit Card Trainer</p>
            <p class="text-sm text-slate-400">Learn about debit cards.</p>
          </div>
        </button>

        <button type="button" class="spa-nav-card bg-slate-800/90 border border-slate-700 rounded-2xl p-4 flex items-center gap-4 hover:bg-slate-700 hover:border-emerald-500 transition cursor-pointer backdrop-blur-sm" data-view-target="secure-usage">
          <div class="p-3 bg-white rounded-xl flex-shrink-0">
            <img src="https://atp-resources.github.io/assets/money/assets/icons/lock-icon-secure-card-use.png" class="menu-icon" alt="">
          </div>
          <div class="text-left">
            <p class="font-semibold text-slate-50 text-base">Secure Card Usage</p>
            <p class="text-sm text-slate-400">Keep your card safe.</p>
          </div>
        </button>
      </div>
    </section>

    <!-- Intro -->
    <section data-view="menu" class="mb-6 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg backdrop-blur-sm">
      <div class="flex items-center gap-3 mb-3">
        <div class="p-2 bg-emerald-500/20 rounded-xl">
          <svg class="icon-lg text-emerald-400"><use href="#icon-wallet"/></svg>
        </div>
        <h1 class="text-2xl sm:text-3xl font-bold text-slate-50">Welcome to Money Skills Studio</h1>
      </div>
      <p class="text-slate-200 text-sm sm:text-base">Learn coin and bill values, practice identifying amounts, and build everyday money confidence.</p>
    </section>

    <!-- Coins gallery -->
    <section data-view="menu" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg backdrop-blur-sm">
      <div class="flex items-center gap-2 mb-4">
        <div class="p-1.5 bg-amber-500/20 rounded-lg">
          <svg class="icon text-amber-400"><use href="#icon-coin"/></svg>
        </div>
        <h2 class="text-lg sm:text-xl font-semibold text-amber-300">U.S. Coins</h2>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
        <div class="coin-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/penny.png" alt="Penny" class="w-16 h-16 mx-auto mb-2 object-contain">
          <p class="font-semibold text-slate-100">Penny</p>
          <p class="text-emerald-400">1¢</p>
        </div>
        <div class="coin-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/nickel.png" alt="Nickel" class="w-16 h-16 mx-auto mb-2 object-contain">
          <p class="font-semibold text-slate-100">Nickel</p>
          <p class="text-emerald-400">5¢</p>
        </div>
        <div class="coin-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/dime.png" alt="Dime" class="w-16 h-16 mx-auto mb-2 object-contain">
          <p class="font-semibold text-slate-100">Dime</p>
          <p class="text-emerald-400">10¢</p>
        </div>
        <div class="coin-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/quarter.png" alt="Quarter" class="w-16 h-16 mx-auto mb-2 object-contain">
          <p class="font-semibold text-slate-100">Quarter</p>
          <p class="text-emerald-400">25¢</p>
        </div>
      </div>
    </section>

    <!-- Bills gallery -->
    <section data-view="menu" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg backdrop-blur-sm">
      <div class="flex items-center gap-2 mb-4">
        <div class="p-1.5 bg-green-500/20 rounded-lg">
          <svg class="icon text-green-400"><use href="#icon-bill"/></svg>
        </div>
        <h2 class="text-lg sm:text-xl font-semibold text-green-300">U.S. Bills</h2>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4">
        <div class="bill-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/assets/money/bills/Bill_1_full.png" alt="$1" class="w-full mb-2">
          <p class="text-emerald-400 font-bold">$1</p>
        </div>
        <div class="bill-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/assets/money/bills/Bill_5_full.png" alt="$5" class="w-full mb-2">
          <p class="text-emerald-400 font-bold">$5</p>
        </div>
        <div class="bill-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/assets/money/bills/Bill_10_full.png" alt="$10" class="w-full mb-2">
          <p class="text-emerald-400 font-bold">$10</p>
        </div>
        <div class="bill-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/assets/money/bills/Bill_20_full.png" alt="$20" class="w-full mb-2">
          <p class="text-emerald-400 font-bold">$20</p>
        </div>
        <div class="bill-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/assets/money/bills/Bill_50_full.png" alt="$50" class="w-full mb-2">
          <p class="text-emerald-400 font-bold">$50</p>
        </div>
        <div class="bill-card bg-slate-800/90 border border-slate-700 rounded-xl p-3 text-center backdrop-blur-sm">
          <img src="https://atp-resources.github.io/assets/money/assets/money/coins/assets/money/bills/Bill_100_full.png" alt="$100" class="w-full mb-2">
          <p class="text-emerald-400 font-bold">$100</p>
        </div>
      </div>
    </section>

    <!-- Quick Practice Section -->
    <section id="quick-practice" data-view="quick-practice" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg hidden backdrop-blur-sm">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <div class="p-1.5 bg-blue-500/20 rounded-lg">
            <svg class="icon text-blue-400"><use href="#icon-target"/></svg>
          </div>
          <h2 class="text-lg sm:text-xl font-semibold text-blue-300">Quick Practice</h2>
        </div>
        <button type="button" class="back-to-menu icon-button px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-full text-sm transition">
          <svg class="icon-sm"><use href="#icon-x"/></svg>
          Back to Menu
        </button>
      </div>
      <div class="flex flex-wrap gap-4 mb-6">
        <div class="stat-box flex items-center gap-2 bg-slate-800/90 border border-slate-700 rounded-lg px-3 py-2 backdrop-blur-sm">
          <svg class="icon text-amber-400"><use href="#icon-target"/></svg>
          <span class="text-slate-300 text-sm">Score:</span>
          <span id="score" class="text-emerald-400 font-bold">0</span>
        </div>
        <div class="stat-box flex items-center gap-2 bg-slate-800/90 border border-slate-700 rounded-lg px-3 py-2 backdrop-blur-sm">
          <svg class="icon text-rose-400"><use href="#icon-x"/></svg>
          <span class="text-slate-300 text-sm">Missed:</span>
          <span id="missed" class="text-rose-400 font-bold">0</span>
        </div>
        <div class="stat-box flex items-center gap-2 bg-slate-800/90 border border-slate-700 rounded-lg px-3 py-2 backdrop-blur-sm">
          <svg class="icon text-purple-400"><use href="#icon-trophy"/></svg>
          <span class="text-slate-300 text-sm">Streak:</span>
          <span id="streak" class="text-purple-400 font-bold">0</span>
        </div>
      </div>
      <div class="flex justify-center mb-6">
        <div class="bg-slate-800/90 border border-slate-700 rounded-2xl p-6 flex flex-col items-center backdrop-blur-sm">
          <img id="moneyImage" src="" alt="Money" class="max-w-xs sm:max-w-sm rounded-lg mb-4" />
          <p id="feedback" class="text-slate-300 text-center font-medium min-h-[1.5rem]"></p>
        </div>
      </div>
      <div id="answerButtons" class="grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4"></div>
      <div class="flex justify-center gap-3 mt-4">
        <button type="button" id="hintBtn" class="icon-button px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-full text-sm font-semibold transition">
          <svg class="icon-sm"><use href="#icon-hint"/></svg>
          Hint
        </button>
        <button type="button" id="newQuestionBtn" class="icon-button px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full text-sm font-semibold transition">
          <svg class="icon-sm"><use href="#icon-refresh"/></svg>
          New Question
        </button>
      </div>
    </section>

    <!-- Match the Portrait Section -->
    <section id="match-portrait" data-view="match-portrait" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg hidden backdrop-blur-sm">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <div class="p-1.5 bg-purple-500/20 rounded-lg">
            <svg class="icon text-purple-400"><use href="#icon-user"/></svg>
          </div>
          <h2 class="text-lg sm:text-xl font-semibold text-purple-300">Match the Portrait</h2>
        </div>
        <button type="button" class="back-to-menu icon-button px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-full text-sm transition">
          <svg class="icon-sm"><use href="#icon-x"/></svg>
          Back to Menu
        </button>
      </div>
      <p class="text-slate-300 mb-6">Tap the bill that shows the person's portrait named below.</p>
      <div class="text-center mb-6">
        <p class="text-slate-400 text-sm">Find this person:</p>
        <p id="portrait-target" class="text-2xl font-bold text-emerald-300 mt-1">Loading...</p>
      </div>
      <div id="portrait-bills" class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6"></div>
      <div id="portrait-feedback" class="text-center mb-4 font-semibold min-h-[1.5rem]"></div>
      <div class="flex flex-wrap items-center justify-center gap-4">
        <div class="stat-box flex items-center gap-2 bg-slate-800/90 border border-slate-700 rounded-lg px-3 py-2 backdrop-blur-sm">
          <svg class="icon text-amber-400"><use href="#icon-target"/></svg>
          <span class="text-slate-300 text-sm">Score:</span>
          <span id="portrait-score" class="text-emerald-400 font-bold">0</span>
        </div>
        <button type="button" id="new-portrait-btn" class="icon-button px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-full text-sm font-semibold transition">
          <svg class="icon-sm"><use href="#icon-refresh"/></svg>
          New Match
        </button>
      </div>
    </section>

    <!-- Receipt Quiz Section -->
    <section id="receipt-quiz" data-view="receipt-quiz" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg hidden backdrop-blur-sm">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <div class="p-1.5 bg-indigo-500/20 rounded-lg">
            <svg class="icon text-indigo-400"><use href="#icon-receipt"/></svg>
          </div>
          <h2 class="text-lg sm:text-xl font-semibold text-indigo-300">Reading Receipts</h2>
        </div>
        <button type="button" class="back-to-menu icon-button px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-full text-sm transition">
          <svg class="icon-sm"><use href="#icon-x"/></svg>
          Back to Menu
        </button>
      </div>
      <p class="text-slate-300 mb-6">Review each receipt and answer the questions about it.</p>
      <div id="receipt-cards">
        <!-- 7-Eleven Receipt -->
        <div class="receipt-card">
          <h3>7-Eleven Receipt</h3>
          <img src="https://atp-resources.github.io/assets/money/assets/receipts/7-11_Receipt_.png" alt="7-Eleven Receipt" class="receipt-image" />
          <ul class="question-list">
            <li>
              <p>1. What was the total amount charged?</p>
              <div class="options" data-receipt="711" data-question="1">
                <label><input type="radio" name="711-q1" value="A" /> $13.00</label>
                <label><input type="radio" name="711-q1" value="B" /> $14.00</label>
                <label><input type="radio" name="711-q1" value="C" /> $15.00</label>
                <label><input type="radio" name="711-q1" value="D" /> $12.00</label>
              </div>
            </li>
            <li>
              <p>2. Which item had a promotion?</p>
              <div class="options" data-receipt="711" data-question="2">
                <label><input type="radio" name="711-q2" value="A" /> Sweet Tea</label>
                <label><input type="radio" name="711-q2" value="B" /> EnergyXS</label>
                <label><input type="radio" name="711-q2" value="C" /> Doritos</label>
                <label><input type="radio" name="711-q2" value="D" /> Maestro</label>
              </div>
            </li>
            <li>
              <p>3. How was the payment made?</p>
              <div class="options" data-receipt="711" data-question="3">
                <label><input type="radio" name="711-q3" value="A" /> Cash</label>
                <label><input type="radio" name="711-q3" value="B" /> VISA</label>
                <label><input type="radio" name="711-q3" value="C" /> Debit card</label>
                <label><input type="radio" name="711-q3" value="D" /> Gift card</label>
              </div>
            </li>
          </ul>
          <button type="button" class="check-receipt" data-receipt="711">
            <svg class="icon-sm"><use href="#icon-check"/></svg>
            Check Answers
          </button>
          <div class="receipt-feedback hidden" id="feedback-711"></div>
        </div>

        <!-- Target Receipt -->
        <div class="receipt-card">
          <h3>Target Receipt</h3>
          <img src="https://atp-resources.github.io/assets/money/assets/receipts/Target_Receipt.png" alt="Target Receipt" class="receipt-image" />
          <ul class="question-list">
            <li>
              <p>1. What was the total after tax?</p>
              <div class="options" data-receipt="target" data-question="1">
                <label><input type="radio" name="target-q1" value="A" /> $533.89</label>
                <label><input type="radio" name="target-q1" value="B" /> $49.89</label>
                <label><input type="radio" name="target-q1" value="C" /> $585.74</label>
                <label><input type="radio" name="target-q1" value="D" /> $585.00</label>
              </div>
            </li>
            <li>
              <p>2. How many items are listed?</p>
              <div class="options" data-receipt="target" data-question="2">
                <label><input type="radio" name="target-q2" value="A" /> 2</label>
                <label><input type="radio" name="target-q2" value="B" /> 3</label>
                <label><input type="radio" name="target-q2" value="C" /> 4</label>
                <label><input type="radio" name="target-q2" value="D" /> 5</label>
              </div>
            </li>
            <li>
              <p>3. What was the discount amount?</p>
              <div class="options" data-receipt="target" data-question="3">
                <label><input type="radio" name="target-q3" value="A" /> $20</label>
                <label><input type="radio" name="target-q3" value="B" /> $50</label>
                <label><input type="radio" name="target-q3" value="C" /> $100</label>
                <label><input type="radio" name="target-q3" value="D" /> No discount</label>
              </div>
            </li>
          </ul>
          <button type="button" class="check-receipt" data-receipt="target">
            <svg class="icon-sm"><use href="#icon-check"/></svg>
            Check Answers
          </button>
          <div class="receipt-feedback hidden" id="feedback-target"></div>
        </div>

        <!-- Walmart Receipt -->
        <div class="receipt-card">
          <h3>Walmart Receipt</h3>
          <img src="https://atp-resources.github.io/assets/money/assets/receipts/Walmart_Receipt.png" alt="Walmart Receipt" class="receipt-image" />
          <ul class="question-list">
            <li>
              <p>1. What was the total amount charged?</p>
              <div class="options" data-receipt="walmart" data-question="1">
                <label><input type="radio" name="walmart-q1" value="A" /> $27.27</label>
                <label><input type="radio" name="walmart-q1" value="B" /> $23.09</label>
                <label><input type="radio" name="walmart-q1" value="C" /> $29.00</label>
                <label><input type="radio" name="walmart-q1" value="D" /> $1.24</label>
              </div>
            </li>
            <li>
              <p>2. How many items were sold?</p>
              <div class="options" data-receipt="walmart" data-question="2">
                <label><input type="radio" name="walmart-q2" value="A" /> 3</label>
                <label><input type="radio" name="walmart-q2" value="B" /> 4</label>
                <label><input type="radio" name="walmart-q2" value="C" /> 5</label>
                <label><input type="radio" name="walmart-q2" value="D" /> 6</label>
              </div>
            </li>
            <li>
              <p>3. What was the tax amount from TAX 1?</p>
              <div class="options" data-receipt="walmart" data-question="3">
                <label><input type="radio" name="walmart-q3" value="A" /> $4.90</label>
                <label><input type="radio" name="walmart-q3" value="B" /> $7.89</label>
                <label><input type="radio" name="walmart-q3" value="C" /> $2.90</label>
                <label><input type="radio" name="walmart-q3" value="D" /> $1.28</label>
              </div>
            </li>
          </ul>
          <button type="button" class="check-receipt" data-receipt="walmart">
            <svg class="icon-sm"><use href="#icon-check"/></svg>
            Check Answers
          </button>
          <div class="receipt-feedback hidden" id="feedback-walmart"></div>
        </div>

        <!-- CVS Receipt -->
        <div class="receipt-card">
          <h3>CVS Pharmacy Receipt</h3>
          <img src="https://atp-resources.github.io/assets/money/assets/receipts/CVS_Receipt_.png" alt="CVS Receipt" class="receipt-image" />
          <ul class="question-list">
            <li>
              <p>1. What was the subtotal?</p>
              <div class="options" data-receipt="cvs" data-question="1">
                <label><input type="radio" name="cvs-q1" value="A" /> $30.52</label>
                <label><input type="radio" name="cvs-q1" value="B" /> $33.50</label>
                <label><input type="radio" name="cvs-q1" value="C" /> $2.98</label>
                <label><input type="radio" name="cvs-q1" value="D" /> $17.98</label>
              </div>
            </li>
            <li>
              <p>2. How many items were purchased?</p>
              <div class="options" data-receipt="cvs" data-question="2">
                <label><input type="radio" name="cvs-q2" value="A" /> 2</label>
                <label><input type="radio" name="cvs-q2" value="B" /> 3</label>
                <label><input type="radio" name="cvs-q2" value="C" /> 4</label>
                <label><input type="radio" name="cvs-q2" value="D" /> 5</label>
              </div>
            </li>
            <li>
              <p>3. How much tax was charged?</p>
              <div class="options" data-receipt="cvs" data-question="3">
                <label><input type="radio" name="cvs-q3" value="A" /> $7.89</label>
                <label><input type="radio" name="cvs-q3" value="B" /> $2.98</label>
                <label><input type="radio" name="cvs-q3" value="C" /> $4.65</label>
                <label><input type="radio" name="cvs-q3" value="D" /> $8.24</label>
              </div>
            </li>
          </ul>
          <button type="button" class="check-receipt" data-receipt="cvs">
            <svg class="icon-sm"><use href="#icon-check"/></svg>
            Check Answers
          </button>
          <div class="receipt-feedback hidden" id="feedback-cvs"></div>
        </div>

        <!-- Best Buy Receipt -->
        <div class="receipt-card">
          <h3>Best Buy Receipt</h3>
          <img src="https://atp-resources.github.io/assets/money/assets/receipts/Best_Buy_Receipt_.png" alt="Best Buy Receipt" class="receipt-image" />
          <ul class="question-list">
            <li>
              <p>1. What is the subtotal before tax?</p>
              <div class="options" data-receipt="bestbuy" data-question="1">
                <label><input type="radio" name="bestbuy-q1" value="A" /> $233.89</label>
                <label><input type="radio" name="bestbuy-q1" value="B" /> $2574.78</label>
                <label><input type="radio" name="bestbuy-q1" value="C" /> $2353.89</label>
                <label><input type="radio" name="bestbuy-q1" value="D" /> $220.89</label>
              </div>
            </li>
            <li>
              <p>2. Which item cost $29.99?</p>
              <div class="options" data-receipt="bestbuy" data-question="2">
                <label><input type="radio" name="bestbuy-q2" value="A" /> HDMI cables</label>
                <label><input type="radio" name="bestbuy-q2" value="B" /> OLED TV</label>
                <label><input type="radio" name="bestbuy-q2" value="C" /> Logitech Mouse</label>
                <label><input type="radio" name="bestbuy-q2" value="D" /> Bonus TV Stand</label>
              </div>
            </li>
            <li>
              <p>3. What type of card was used?</p>
              <div class="options" data-receipt="bestbuy" data-question="3">
                <label><input type="radio" name="bestbuy-q3" value="A" /> MasterCard</label>
                <label><input type="radio" name="bestbuy-q3" value="B" /> Discover</label>
                <label><input type="radio" name="bestbuy-q3" value="C" /> VISA</label>
                <label><input type="radio" name="bestbuy-q3" value="D" /> American Express</label>
              </div>
            </li>
          </ul>
          <button type="button" class="check-receipt" data-receipt="bestbuy">
            <svg class="icon-sm"><use href="#icon-check"/></svg>
            Check Answers
          </button>
          <div class="receipt-feedback hidden" id="feedback-bestbuy"></div>
        </div>

        <!-- Costco Receipt -->
        <div class="receipt-card">
          <h3>Costco Receipt</h3>
          <img src="https://atp-resources.github.io/assets/money/assets/receipts/Costco_Receipt_.png" alt="Costco Receipt" class="receipt-image" />
          <ul class="question-list">
            <li>
              <p>1. What was the total amount charged?</p>
              <div class="options" data-receipt="costco" data-question="1">
                <label><input type="radio" name="costco-q1" value="A" /> $102.67</label>
                <label><input type="radio" name="costco-q1" value="B" /> $576.89</label>
                <label><input type="radio" name="costco-q1" value="C" /> $679.56</label>
                <label><input type="radio" name="costco-q1" value="D" /> $679.00</label>
              </div>
            </li>
            <li>
              <p>2. How many bananas were purchased?</p>
              <div class="options" data-receipt="costco" data-question="2">
                <label><input type="radio" name="costco-q2" value="A" /> 1</label>
                <label><input type="radio" name="costco-q2" value="B" /> 2</label>
                <label><input type="radio" name="costco-q2" value="C" /> 3</label>
                <label><input type="radio" name="costco-q2" value="D" /> 4</label>
              </div>
            </li>
            <li>
              <p>3. What was the tax total?</p>
              <div class="options" data-receipt="costco" data-question="3">
                <label><input type="radio" name="costco-q3" value="A" /> $10.23</label>
                <label><input type="radio" name="costco-q3" value="B" /> $3.30</label>
                <label><input type="radio" name="costco-q3" value="C" /> $89.90</label>
                <label><input type="radio" name="costco-q3" value="D" /> $102.67</label>
              </div>
            </li>
          </ul>
          <button type="button" class="check-receipt" data-receipt="costco">
            <svg class="icon-sm"><use href="#icon-check"/></svg>
            Check Answers
          </button>
          <div class="receipt-feedback hidden" id="feedback-costco"></div>
        </div>

        <!-- Lowe's Receipt -->
        <div class="receipt-card">
          <h3>Lowe's Receipt</h3>
          <img src="https://atp-resources.github.io/assets/money/assets/receipts/Lowes_Receipt_.png" alt="Lowe's Receipt" class="receipt-image" />
          <ul class="question-list">
            <li>
              <p>1. What was the total amount including tax?</p>
              <div class="options" data-receipt="lowes" data-question="1">
                <label><input type="radio" name="lowes-q1" value="A" /> $203.61</label>
                <label><input type="radio" name="lowes-q1" value="B" /> $213.84</label>
                <label><input type="radio" name="lowes-q1" value="C" /> $10.23</label>
                <label><input type="radio" name="lowes-q1" value="D" /> $89.00</label>
              </div>
            </li>
            <li>
              <p>2. How many rose plants were purchased?</p>
              <div class="options" data-receipt="lowes" data-question="2">
                <label><input type="radio" name="lowes-q2" value="A" /> 1</label>
                <label><input type="radio" name="lowes-q2" value="B" /> 5</label>
                <label><input type="radio" name="lowes-q2" value="C" /> 10</label>
                <label><input type="radio" name="lowes-q2" value="D" /> 20</label>
              </div>
            </li>
            <li>
              <p>3. What type of card was used?</p>
              <div class="options" data-receipt="lowes" data-question="3">
                <label><input type="radio" name="lowes-q3" value="A" /> MasterCard</label>
                <label><input type="radio" name="lowes-q3" value="B" /> Debit</label>
                <label><input type="radio" name="lowes-q3" value="C" /> Chase VISA</label>
                <label><input type="radio" name="lowes-q3" value="D" /> Cash</label>
              </div>
            </li>
          </ul>
          <button type="button" class="check-receipt" data-receipt="lowes">
            <svg class="icon-sm"><use href="#icon-check"/></svg>
            Check Answers
          </button>
          <div class="receipt-feedback hidden" id="feedback-lowes"></div>
        </div>
      </div>
    </section>

    <!-- Payment Simulator Section -->
    <section id="payment-simulator" data-view="payment-simulator" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg hidden backdrop-blur-sm">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <div class="p-1.5 bg-cyan-500/20 rounded-lg">
            <img src="https://atp-resources.github.io/assets/money/assets/icons/cash-register-icon.png" class="icon" alt="">
          </div>
          <h2 class="text-lg sm:text-xl font-semibold text-cyan-300">Payment Simulator</h2>
        </div>
        <button type="button" class="back-to-menu icon-button px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-full text-sm transition">
          <svg class="icon-sm"><use href="#icon-x"/></svg>
          Back to Menu
        </button>
      </div>
      <p class="text-slate-300 mb-6">Practice paying the exact amount using bills and coins.</p>
      <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 mb-6 text-center backdrop-blur-sm">
        <p class="text-slate-400 text-sm mb-1">Amount to Pay:</p>
        <p id="pay-target" class="text-3xl font-bold text-emerald-400">$0.00</p>
      </div>
      <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 mb-6 backdrop-blur-sm">
        <p class="text-slate-400 text-sm mb-2">Your Payment:</p>
        <p id="pay-current" class="text-2xl font-bold text-slate-200 mb-2">$0.00</p>
        <div id="pay-selected" class="flex flex-wrap gap-2 min-h-[40px]"></div>
      </div>
      <div class="mb-6">
        <p class="text-slate-400 text-sm mb-3">Select Bills:</p>
        <div id="pay-bills" class="grid grid-cols-3 sm:grid-cols-6 gap-2 mb-4"></div>
        <p class="text-slate-400 text-sm mb-3">Select Coins:</p>
        <div id="pay-coins" class="grid grid-cols-4 gap-2"></div>
      </div>
      <div id="pay-feedback" class="hidden mb-4 p-3 rounded-lg font-semibold"></div>
      <div class="flex flex-wrap justify-center gap-3">
        <button type="button" id="pay-clear" class="icon-button px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-full text-sm font-semibold transition">
          <svg class="icon-sm"><use href="#icon-x"/></svg>
          Clear
        </button>
        <button type="button" id="pay-check" class="icon-button px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-full text-sm font-semibold transition">
          <svg class="icon-sm"><use href="#icon-check"/></svg>
          Check Payment
        </button>
        <button type="button" id="pay-new" class="icon-button px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-full text-sm font-semibold transition">
          <svg class="icon-sm"><use href="#icon-refresh"/></svg>
          New Amount
        </button>
      </div>
    </section>

    <!-- ATM Simulator Section -->
    <section id="atm-simulator" data-view="atm-simulator" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg hidden backdrop-blur-sm">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <div class="p-1.5 bg-teal-500/20 rounded-lg">
            <img src="https://atp-resources.github.io/assets/money/assets/icons/atm-machine-icon.png" class="icon" alt="">
          </div>
          <h2 class="text-lg sm:text-xl font-semibold text-teal-300">ATM Simulator</h2>
        </div>
        <button type="button" class="back-to-menu icon-button px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-full text-sm transition">
          <svg class="icon-sm"><use href="#icon-x"/></svg>
          Back to Menu
        </button>
      </div>
      <p class="text-slate-300 mb-6">Practice making deposits and withdrawals.</p>
      <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 mb-6 text-center backdrop-blur-sm">
        <p class="text-slate-400 text-sm mb-1">Account Balance:</p>
        <p id="atm-balance" class="text-3xl font-bold text-emerald-400">$100.00</p>
      </div>
      <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 mb-6 backdrop-blur-sm">
        <div class="flex gap-4 mb-4">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="atm-action" value="withdraw" checked class="accent-teal-500">
            <span class="text-slate-200">Withdraw</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="atm-action" value="deposit" class="accent-teal-500">
            <span class="text-slate-200">Deposit</span>
          </label>
        </div>
        <div class="flex gap-2 items-center mb-4">
          <span class="text-slate-400">$</span>
          <input type="number" id="atm-amount" placeholder="0.00" min="0" step="0.01" class="flex-1 bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-slate-100 focus:outline-none focus:border-teal-500">
        </div>
        <div id="atm-feedback" class="hidden mb-4 p-3 rounded-lg font-semibold"></div>
        <button type="button" id="atm-submit" class="w-full icon-button justify-center px-4 py-3 bg-teal-600 hover:bg-teal-500 text-white rounded-lg font-semibold transition">
          <svg class="icon-sm"><use href="#icon-check"/></svg>
          Submit
        </button>
      </div>
      <div class="grid grid-cols-4 gap-2">
        <button type="button" class="atm-quick bg-slate-700 hover:bg-slate-600 rounded-lg p-2 text-slate-100 text-sm transition" data-amount="10">$10</button>
        <button type="button" class="atm-quick bg-slate-700 hover:bg-slate-600 rounded-lg p-2 text-slate-100 text-sm transition" data-amount="20">$20</button>
        <button type="button" class="atm-quick bg-slate-700 hover:bg-slate-600 rounded-lg p-2 text-slate-100 text-sm transition" data-amount="50">$50</button>
        <button type="button" class="atm-quick bg-slate-700 hover:bg-slate-600 rounded-lg p-2 text-slate-100 text-sm transition" data-amount="100">$100</button>
      </div>
    </section>

    <!-- Shopping Game Section -->
    <section id="shopping-game" data-view="shopping-game" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg hidden backdrop-blur-sm">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <div class="p-1.5 bg-pink-500/20 rounded-lg">
            <svg class="icon text-pink-400"><use href="#icon-cart"/></svg>
          </div>
          <h2 class="text-lg sm:text-xl font-semibold text-pink-300">Shopping Game</h2>
        </div>
        <button type="button" class="back-to-menu icon-button px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-full text-sm transition">
          <svg class="icon-sm"><use href="#icon-x"/></svg>
          Back to Menu
        </button>
      </div>
      <p class="text-slate-300 mb-6">Stay within your budget!</p>
      <div class="grid grid-cols-2 gap-4 mb-6">
        <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 text-center backdrop-blur-sm">
          <p class="text-slate-400 text-sm mb-1">Budget:</p>
          <p id="shop-budget" class="text-2xl font-bold text-emerald-400">$50.00</p>
        </div>
        <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 text-center backdrop-blur-sm">
          <p class="text-slate-400 text-sm mb-1">Cart Total:</p>
          <p id="shop-total" class="text-2xl font-bold text-slate-200">$0.00</p>
        </div>
      </div>
      <div class="mb-6">
        <p class="text-slate-400 text-sm mb-3">Available Items:</p>
        <div id="shop-items" class="grid grid-cols-2 sm:grid-cols-4 gap-3"></div>
      </div>
      <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 mb-6 backdrop-blur-sm">
        <p class="text-slate-400 text-sm mb-2">Your Cart:</p>
        <div id="shop-cart" class="min-h-[40px]"><p class="text-slate-500 italic">Cart is empty</p></div>
      </div>
      <div id="shop-feedback" class="hidden mb-4 p-3 rounded-lg font-semibold"></div>
      <div class="flex justify-center">
        <button type="button" id="shop-check" class="icon-button px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white rounded-full text-sm font-semibold transition">
          <svg class="icon-sm"><use href="#icon-check"/></svg>
          Check Out
        </button>
      </div>
    </section>

    <!-- Debit Card Trainer Section -->
    <section id="debit-trainer" data-view="debit-trainer" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg hidden backdrop-blur-sm">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <div class="p-1.5 bg-orange-500/20 rounded-lg">
            <img src="https://atp-resources.github.io/assets/money/assets/icons/debit-card.png" class="icon" alt="">
          </div>
          <h2 class="text-lg sm:text-xl font-semibold text-orange-300">Debit Card Trainer</h2>
        </div>
        <button type="button" class="back-to-menu icon-button px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-full text-sm transition">
          <svg class="icon-sm"><use href="#icon-x"/></svg>
          Back to Menu
        </button>
      </div>
      <p class="text-slate-300 mb-6">Learn about using a debit card safely.</p>
      <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 mb-6 backdrop-blur-sm">
        <h3 class="text-lg font-semibold text-orange-300 mb-3">What is a Debit Card?</h3>
        <p class="text-slate-300 text-sm mb-3">A debit card lets you pay for things using money from your bank account.</p>
        <ul class="text-slate-300 text-sm space-y-2">
          <li class="flex gap-2"><svg class="icon-sm text-emerald-400 flex-shrink-0 mt-0.5"><use href="#icon-check"/></svg><span>You can only spend what you have</span></li>
          <li class="flex gap-2"><svg class="icon-sm text-emerald-400 flex-shrink-0 mt-0.5"><use href="#icon-check"/></svg><span>Keep your PIN secret!</span></li>
        </ul>
      </div>
      <div class="space-y-4">
        <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 backdrop-blur-sm">
          <p class="text-slate-100 font-medium mb-3">1. Where does the money come from when you use a debit card?</p>
          <div class="options" data-question-id="dc-1">
            <label><input type="radio" name="dc-1" value="A" /> A loan from the bank</label>
            <label><input type="radio" name="dc-1" value="B" /> Your bank account</label>
            <label><input type="radio" name="dc-1" value="C" /> Your parents' wallet</label>
          </div>
        </div>
        <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 backdrop-blur-sm">
          <p class="text-slate-100 font-medium mb-3">2. What should you do with your PIN number?</p>
          <div class="options" data-question-id="dc-2">
            <label><input type="radio" name="dc-2" value="A" /> Share it with friends</label>
            <label><input type="radio" name="dc-2" value="B" /> Keep it secret</label>
            <label><input type="radio" name="dc-2" value="C" /> Write it on the card</label>
          </div>
        </div>
        <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 backdrop-blur-sm">
          <p class="text-slate-100 font-medium mb-3">3. Can you spend more than what's in your account?</p>
          <div class="options" data-question-id="dc-3">
            <label><input type="radio" name="dc-3" value="A" /> Yes, always</label>
            <label><input type="radio" name="dc-3" value="B" /> No, you can only spend what you have</label>
            <label><input type="radio" name="dc-3" value="C" /> Only on weekends</label>
          </div>
        </div>
      </div>
      <div id="debit-feedback" class="hidden mt-4 p-3 rounded-lg font-semibold"></div>
      <div class="flex justify-center mt-6">
        <button type="button" class="quiz-check icon-button px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded-full text-sm font-semibold transition" data-quiz-id="debit-trainer">
          <svg class="icon-sm"><use href="#icon-check"/></svg>
          Check Answers
        </button>
      </div>
    </section>

    <!-- Secure Usage Quiz Section -->
    <section id="secure-usage" data-view="secure-usage" class="mb-8 bg-slate-900/80 border border-slate-800 rounded-2xl p-4 sm:p-6 shadow-lg hidden backdrop-blur-sm">
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-2">
          <div class="p-1.5 bg-red-500/20 rounded-lg">
            <img src="https://atp-resources.github.io/assets/money/assets/icons/lock-icon-secure-card-use.png" class="icon" alt="">
          </div>
          <h2 class="text-lg sm:text-xl font-semibold text-red-300">Secure Card Usage</h2>
        </div>
        <button type="button" class="back-to-menu icon-button px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-full text-sm transition">
          <svg class="icon-sm"><use href="#icon-x"/></svg>
          Back to Menu
        </button>
      </div>
      <p class="text-slate-300 mb-6">Learn how to keep your money and cards safe.</p>
      <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 mb-6 backdrop-blur-sm">
        <h3 class="text-lg font-semibold text-red-300 mb-3">Safety Tips</h3>
        <ul class="text-slate-300 text-sm space-y-2">
          <li class="flex gap-2"><svg class="icon-sm text-red-400 flex-shrink-0 mt-0.5"><use href="#icon-x"/></svg><span>Never share your PIN</span></li>
          <li class="flex gap-2"><svg class="icon-sm text-emerald-400 flex-shrink-0 mt-0.5"><use href="#icon-check"/></svg><span>Cover the keypad when entering your PIN</span></li>
        </ul>
      </div>
      <div class="space-y-4">
        <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 backdrop-blur-sm">
          <p class="text-slate-100 font-medium mb-3">1. Someone asks for your PIN. What do you do?</p>
          <div class="options" data-question-id="su-1">
            <label><input type="radio" name="su-1" value="A" /> Tell them if they seem nice</label>
            <label><input type="radio" name="su-1" value="B" /> Never tell anyone your PIN</label>
            <label><input type="radio" name="su-1" value="C" /> Only tell friends</label>
          </div>
        </div>
        <div class="bg-slate-800/90 border border-slate-700 rounded-xl p-4 backdrop-blur-sm">
          <p class="text-slate-100 font-medium mb-3">2. You lost your debit card. What should you do first?</p>
          <div class="options" data-question-id="su-2">
            <label><input type="radio" name="su-2" value="A" /> Wait and see if someone returns it</label>
            <label><input type="radio" name="su-2" value="B" /> Tell a trusted adult right away</label>
            <label><input type="radio" name="su-2" value="C" /> Post about it on social media</label>
          </div>
        </div>
      </div>
      <div id="secure-feedback" class="hidden mt-4 p-3 rounded-lg font-semibold"></div>
      <div class="flex justify-center mt-6">
        <button type="button" class="quiz-check icon-button px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-full text-sm font-semibold transition" data-quiz-id="secure-usage">
          <svg class="icon-sm"><use href="#icon-check"/></svg>
          Check Answers
        </button>
      </div>
    </section>

  </main>
  </div>

  <!-- Tubes Cursor Script -->
  <script type="module">
    import TubesCursor from "https://cdn.jsdelivr.net/npm/threejs-components@0.0.19/build/cursors/tubes1.min.js";
    const canvas = document.getElementById('tubes-canvas');
    const app = TubesCursor(canvas, {
      tubes: {
        colors: ["#10b981", "#6366f1", "#f59e0b"],
        lights: { intensity: 200, colors: ["#34d399", "#818cf8", "#fbbf24", "#f472b6"] }
      }
    });
    canvas.addEventListener('click', () => {
      app.tubes.setColors(randomColors(3));
      app.tubes.setLightsColors(randomColors(4));
    });
    function randomColors(count) {
      return new Array(count).fill(0).map(() => "#" + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0'));
    }
  </script>

  <script>
    // CORRECT PATHS based on actual GitHub folder structure
    const baseURL = "https://atp-resources.github.io/assets/money/";
    const coinsURL = baseURL + "assets/money/coins/";
    const billsURL = baseURL + "assets/money/coins/assets/money/bills/";
    const iconsURL = baseURL + "assets/icons/";
    const receiptsURL = baseURL + "assets/receipts/";
    
    // Debug: Log paths to console
    console.log("Coins URL:", coinsURL + "penny.png");
    console.log("Bills URL:", billsURL + "Bill_1_full.png");
    console.log("Receipts URL:", receiptsURL + "7-11_Receipt_.png");

    const moneyItems = [
      { name: "Penny", value: "1¢", img: coinsURL + "penny.png", hint: "The smallest coin, copper colored." },
      { name: "Nickel", value: "5¢", img: coinsURL + "nickel.png", hint: "Larger than a penny, silver color." },
      { name: "Dime", value: "10¢", img: coinsURL + "dime.png", hint: "The smallest silver coin." },
      { name: "Quarter", value: "25¢", img: coinsURL + "quarter.png", hint: "The largest common coin." },
      { name: "$1 Bill", value: "$1", img: billsURL + "Bill_1_full.png", hint: "George Washington is on this bill." },
      { name: "$5 Bill", value: "$5", img: billsURL + "Bill_5_full.png", hint: "Abraham Lincoln is on this bill." },
      { name: "$10 Bill", value: "$10", img: billsURL + "Bill_10_full.png", hint: "Alexander Hamilton is on this bill." },
      { name: "$20 Bill", value: "$20", img: billsURL + "Bill_20_full.png", hint: "Andrew Jackson is on this bill." },
      { name: "$50 Bill", value: "$50", img: billsURL + "Bill_50_full.png", hint: "Ulysses S. Grant is on this bill." },
      { name: "$100 Bill", value: "$100", img: billsURL + "Bill_100_full.png", hint: "Benjamin Franklin is on this bill." }
    ];

    let score = 0, missed = 0, streak = 0, currentItem = null, answeredThisRound = false, usedIndices = [];
    const moneyImage = document.getElementById("moneyImage"), answerButtons = document.getElementById("answerButtons"), feedbackEl = document.getElementById("feedback"), scoreEl = document.getElementById("score"), missedEl = document.getElementById("missed"), streakEl = document.getElementById("streak"), hintBtn = document.getElementById("hintBtn"), newQuestionBtn = document.getElementById("newQuestionBtn");

    function shuffleArray(arr) { const a = [...arr]; for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [a[i], a[j]] = [a[j], a[i]]; } return a; }
    function getUnusedIndex() { const available = moneyItems.map((_, i) => i).filter(i => !usedIndices.includes(i)); if (available.length === 0) { usedIndices = []; return Math.floor(Math.random() * moneyItems.length); } return available[Math.floor(Math.random() * available.length)]; }
    
    function loadQuestion() {
      answeredThisRound = false;
      const idx = getUnusedIndex();
      usedIndices.push(idx);
      currentItem = moneyItems[idx];
      moneyImage.src = currentItem.img;
      moneyImage.alt = currentItem.name;
      feedbackEl.textContent = "";
      feedbackEl.className = "text-slate-300 text-center font-medium min-h-[1.5rem]";
      let options = shuffleArray(moneyItems).slice(0, 4);
      if (!options.find(o => o.name === currentItem.name)) options[Math.floor(Math.random() * 4)] = currentItem;
      options = shuffleArray(options);
      answerButtons.innerHTML = "";
      options.forEach(opt => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "bg-slate-700 hover:bg-slate-600 rounded-xl px-4 py-3 text-slate-100 font-medium transition";
        btn.textContent = `${opt.name} (${opt.value})`;
        btn.addEventListener("click", () => checkAnswer(opt, btn));
        answerButtons.appendChild(btn);
      });
    }
    
    function checkAnswer(selected, btn) {
      if (answeredThisRound) return;
      answeredThisRound = true;
      const buttons = answerButtons.querySelectorAll("button");
      buttons.forEach(b => { b.disabled = true; b.classList.remove("hover:bg-slate-600"); });
      if (selected.name === currentItem.name) {
        score++; streak++;
        btn.classList.remove("bg-slate-700"); btn.classList.add("bg-emerald-600", "text-white");
        feedbackEl.textContent = "Correct!"; feedbackEl.className = "text-emerald-400 text-center font-medium min-h-[1.5rem]";
      } else {
        missed++; streak = 0;
        btn.classList.remove("bg-slate-700"); btn.classList.add("bg-rose-600", "text-white");
        feedbackEl.textContent = `Incorrect. The answer was ${currentItem.name} (${currentItem.value}).`;
        feedbackEl.className = "text-rose-400 text-center font-medium min-h-[1.5rem]";
        buttons.forEach(b => { if (b.textContent.startsWith(currentItem.name)) { b.classList.remove("bg-slate-700"); b.classList.add("bg-emerald-600/50"); } });
      }
      scoreEl.textContent = score; missedEl.textContent = missed; streakEl.textContent = streak;
    }
    
    function showHint() { if (currentItem && !answeredThisRound) { feedbackEl.textContent = "Hint: " + currentItem.hint; feedbackEl.className = "text-amber-400 text-center font-medium min-h-[1.5rem]"; } }
    if (hintBtn) hintBtn.addEventListener("click", showHint);
    if (newQuestionBtn) newQuestionBtn.addEventListener("click", loadQuestion);
    loadQuestion();

    // Portrait Game
    const portraits = [
      { name: "George Washington", bill: "$1 Bill", img: billsURL + "Bill_1_full.png" },
      { name: "Abraham Lincoln", bill: "$5 Bill", img: billsURL + "Bill_5_full.png" },
      { name: "Alexander Hamilton", bill: "$10 Bill", img: billsURL + "Bill_10_full.png" },
      { name: "Andrew Jackson", bill: "$20 Bill", img: billsURL + "Bill_20_full.png" },
      { name: "Ulysses S. Grant", bill: "$50 Bill", img: billsURL + "Bill_50_full.png" },
      { name: "Benjamin Franklin", bill: "$100 Bill", img: billsURL + "Bill_100_full.png" }
    ];

    let portraitScore = 0, currentPortrait = null, portraitAnswered = false, usedPortraitIndices = [];
    const portraitTarget = document.getElementById("portrait-target"), portraitBills = document.getElementById("portrait-bills"), portraitFeedback = document.getElementById("portrait-feedback"), portraitScoreEl = document.getElementById("portrait-score"), newPortraitBtn = document.getElementById("new-portrait-btn");

    function getUnusedPortraitIndex() { const available = portraits.map((_, i) => i).filter(i => !usedPortraitIndices.includes(i)); if (available.length === 0) { usedPortraitIndices = []; return Math.floor(Math.random() * portraits.length); } return available[Math.floor(Math.random() * available.length)]; }
    
    function loadPortraitQuestion() {
      portraitAnswered = false;
      const idx = getUnusedPortraitIndex();
      usedPortraitIndices.push(idx);
      currentPortrait = portraits[idx];
      portraitTarget.textContent = currentPortrait.name;
      portraitFeedback.textContent = "";
      let options = shuffleArray(portraits).slice(0, 4);
      if (!options.find(o => o.name === currentPortrait.name)) options[Math.floor(Math.random() * 4)] = currentPortrait;
      options = shuffleArray(options);
      portraitBills.innerHTML = "";
      options.forEach(opt => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "bg-slate-800/90 border-2 border-slate-700 rounded-xl p-3 hover:border-purple-500 transition cursor-pointer backdrop-blur-sm";
        btn.innerHTML = `<img src="${opt.img}" alt="${opt.bill}" class="w-full rounded-lg mb-2"><p class="text-emerald-400 font-bold text-sm">${opt.bill}</p>`;
        btn.addEventListener("click", () => checkPortraitAnswer(opt, btn));
        portraitBills.appendChild(btn);
      });
    }
    
    function checkPortraitAnswer(selected, btn) {
      if (portraitAnswered) return;
      portraitAnswered = true;
      const buttons = portraitBills.querySelectorAll("button");
      buttons.forEach(b => { b.disabled = true; b.classList.remove("hover:border-purple-500"); });
      if (selected.name === currentPortrait.name) {
        portraitScore++;
        btn.classList.remove("border-slate-700"); btn.classList.add("border-emerald-500", "bg-emerald-900/30");
        portraitFeedback.textContent = "Correct!"; portraitFeedback.className = "text-emerald-400 text-center mb-4 font-semibold";
      } else {
        btn.classList.remove("border-slate-700"); btn.classList.add("border-rose-500", "bg-rose-900/30");
        portraitFeedback.textContent = `Incorrect. ${currentPortrait.name} is on the ${currentPortrait.bill}.`;
        portraitFeedback.className = "text-rose-400 text-center mb-4 font-semibold";
        buttons.forEach(b => { if (b.querySelector("p").textContent === currentPortrait.bill) { b.classList.remove("border-slate-700"); b.classList.add("border-emerald-500/50", "bg-emerald-900/20"); } });
      }
      portraitScoreEl.textContent = portraitScore;
    }
    if (newPortraitBtn) newPortraitBtn.addEventListener("click", loadPortraitQuestion);
    loadPortraitQuestion();

    // Receipt Quiz - Answer Key
    const receiptAnswers = { 
      "711": { "1": "B", "2": "B", "3": "B" },       // Total: $14.00, Promo: EnergyXS, Payment: VISA
      "target": { "1": "C", "2": "B", "3": "B" },    // Total: $585.74, Items: 3, Discount: $50
      "walmart": { "1": "A", "2": "B", "3": "C" },   // Total: $27.27, Items: 4, Tax 1: $2.90
      "cvs": { "1": "A", "2": "C", "3": "B" },       // Subtotal: $30.52, Items: 4, Tax: $2.98
      "bestbuy": { "1": "C", "2": "C", "3": "C" },   // Subtotal: $2353.89, $29.99: Logitech Mouse, Card: VISA
      "costco": { "1": "C", "2": "A", "3": "D" },    // Total: $679.56, Bananas: 1, Tax: $102.67
      "lowes": { "1": "B", "2": "C", "3": "C" }      // Total: $213.84, Roses: 10, Card: Chase VISA
    };
    document.querySelectorAll(".check-receipt").forEach(btn => {
      btn.addEventListener("click", () => {
        const receiptId = btn.dataset.receipt;
        const answers = receiptAnswers[receiptId];
        if (!answers) return;
        let correct = 0, total = Object.keys(answers).length, allAnswered = true;
        Object.entries(answers).forEach(([q, correctAnswer]) => {
          const optionsDiv = document.querySelector(`[data-receipt="${receiptId}"][data-question="${q}"]`);
          if (!optionsDiv) return;
          const selectedInput = optionsDiv.querySelector("input:checked");
          const labels = optionsDiv.querySelectorAll("label");
          labels.forEach(l => l.classList.remove("correct", "incorrect"));
          if (!selectedInput) { allAnswered = false; return; }
          const selectedLabel = selectedInput.parentElement;
          if (selectedInput.value === correctAnswer) { correct++; selectedLabel.classList.add("correct"); }
          else { selectedLabel.classList.add("incorrect"); labels.forEach(l => { if (l.querySelector("input")?.value === correctAnswer) l.classList.add("correct"); }); }
        });
        const feedbackEl = document.getElementById(`feedback-${receiptId}`);
        if (feedbackEl) {
          feedbackEl.classList.remove("hidden");
          if (!allAnswered) { feedbackEl.textContent = "Please answer all questions."; feedbackEl.className = "receipt-feedback partial"; }
          else if (correct === total) { feedbackEl.textContent = "Perfect!"; feedbackEl.className = "receipt-feedback success"; }
          else { feedbackEl.textContent = `${correct}/${total} correct.`; feedbackEl.className = "receipt-feedback " + (correct > 0 ? "partial" : "error"); }
          btn.closest(".receipt-card").querySelectorAll("input").forEach(i => i.disabled = true);
          btn.disabled = true;
        }
      });
    });

    // Payment Simulator
    const payTarget = document.getElementById('pay-target'), payCurrent = document.getElementById('pay-current'), paySelected = document.getElementById('pay-selected'), payBills = document.getElementById('pay-bills'), payCoins = document.getElementById('pay-coins'), payFeedback = document.getElementById('pay-feedback'), payClear = document.getElementById('pay-clear'), payCheck = document.getElementById('pay-check'), payNew = document.getElementById('pay-new');
    let targetAmount = 0, currentPayment = 0, selectedMoney = [];
    const paymentBills = [
      { name: '$1', value: 100, img: billsURL + 'Bill_1_full.png' },
      { name: '$5', value: 500, img: billsURL + 'Bill_5_full.png' },
      { name: '$10', value: 1000, img: billsURL + 'Bill_10_full.png' },
      { name: '$20', value: 2000, img: billsURL + 'Bill_20_full.png' },
      { name: '$50', value: 5000, img: billsURL + 'Bill_50_full.png' },
      { name: '$100', value: 10000, img: billsURL + 'Bill_100_full.png' }
    ];
    const paymentCoins = [
      { name: '1¢', value: 1, img: coinsURL + 'penny.png' },
      { name: '5¢', value: 5, img: coinsURL + 'nickel.png' },
      { name: '10¢', value: 10, img: coinsURL + 'dime.png' },
      { name: '25¢', value: 25, img: coinsURL + 'quarter.png' }
    ];
    function initPaymentSimulator() {
      payBills.innerHTML = '';
      paymentBills.forEach(bill => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'bg-slate-700 hover:bg-slate-600 rounded-lg p-2 transition';
        btn.innerHTML = `<img src="${bill.img}" alt="${bill.name}" class="w-full rounded">`;
        btn.addEventListener('click', () => addPayment(bill));
        payBills.appendChild(btn);
      });
      payCoins.innerHTML = '';
      paymentCoins.forEach(coin => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'bg-slate-700 hover:bg-slate-600 rounded-lg p-2 transition flex flex-col items-center';
        btn.innerHTML = `<img src="${coin.img}" alt="${coin.name}" class="w-12 h-12 object-contain"><span class="text-xs text-slate-300 mt-1">${coin.name}</span>`;
        btn.addEventListener('click', () => addPayment(coin));
        payCoins.appendChild(btn);
      });
      generateNewAmount();
    }
    function generateNewAmount() { targetAmount = Math.floor(Math.random() * 4900) + 100; payTarget.textContent = '$' + (targetAmount / 100).toFixed(2); clearPayment(); }
    function addPayment(item) { selectedMoney.push(item); currentPayment += item.value; updatePaymentDisplay(); }
    function clearPayment() { selectedMoney = []; currentPayment = 0; updatePaymentDisplay(); payFeedback.classList.add('hidden'); }
    function updatePaymentDisplay() {
      payCurrent.textContent = '$' + (currentPayment / 100).toFixed(2);
      paySelected.innerHTML = selectedMoney.length === 0 ? '<span class="text-slate-500 italic text-sm">No money selected</span>' : selectedMoney.map(item => `<span class="inline-block bg-slate-700 rounded px-2 py-1 text-xs">${item.name}</span>`).join('');
      payCurrent.className = currentPayment > targetAmount ? 'text-2xl font-bold text-amber-400 mb-2' : currentPayment === targetAmount ? 'text-2xl font-bold text-emerald-400 mb-2' : 'text-2xl font-bold text-slate-200 mb-2';
    }
    function checkPayment() {
      if (currentPayment === targetAmount) { payFeedback.textContent = 'Perfect!'; payFeedback.className = 'mb-4 p-3 rounded-lg bg-emerald-900/50 text-emerald-300 font-semibold'; }
      else if (currentPayment > targetAmount) { payFeedback.textContent = `Overpaid by $${((currentPayment - targetAmount) / 100).toFixed(2)}`; payFeedback.className = 'mb-4 p-3 rounded-lg bg-amber-900/50 text-amber-300 font-semibold'; }
      else { payFeedback.textContent = `Need $${((targetAmount - currentPayment) / 100).toFixed(2)} more`; payFeedback.className = 'mb-4 p-3 rounded-lg bg-rose-900/50 text-rose-300 font-semibold'; }
      payFeedback.classList.remove('hidden');
    }
    if (payClear) payClear.addEventListener('click', clearPayment);
    if (payCheck) payCheck.addEventListener('click', checkPayment);
    if (payNew) payNew.addEventListener('click', generateNewAmount);
    initPaymentSimulator();

    // ATM Simulator
    let balance = 10000;
    const atmBalance = document.getElementById('atm-balance'), atmAmount = document.getElementById('atm-amount'), atmFeedback = document.getElementById('atm-feedback'), atmSubmit = document.getElementById('atm-submit');
    function updateATMBalance() { atmBalance.textContent = '$' + (balance / 100).toFixed(2); }
    document.querySelectorAll('.atm-quick').forEach(btn => { btn.addEventListener('click', () => { atmAmount.value = btn.dataset.amount; }); });
    function doATMAction() {
      const action = document.querySelector('input[name="atm-action"]:checked').value;
      const amountCents = Math.round(parseFloat(atmAmount.value || 0) * 100);
      if (amountCents <= 0) { atmFeedback.textContent = 'Enter a valid amount.'; atmFeedback.className = 'mb-4 p-3 rounded-lg bg-amber-900/50 text-amber-300 font-semibold'; atmFeedback.classList.remove('hidden'); return; }
      if (action === 'withdraw') {
        if (amountCents > balance) { atmFeedback.textContent = 'Insufficient funds!'; atmFeedback.className = 'mb-4 p-3 rounded-lg bg-rose-900/50 text-rose-300 font-semibold'; }
        else { balance -= amountCents; atmFeedback.textContent = `Withdrew $${(amountCents / 100).toFixed(2)}`; atmFeedback.className = 'mb-4 p-3 rounded-lg bg-emerald-900/50 text-emerald-300 font-semibold'; }
      } else { balance += amountCents; atmFeedback.textContent = `Deposited $${(amountCents / 100).toFixed(2)}`; atmFeedback.className = 'mb-4 p-3 rounded-lg bg-emerald-900/50 text-emerald-300 font-semibold'; }
      atmFeedback.classList.remove('hidden'); updateATMBalance(); atmAmount.value = '';
    }
    if (atmSubmit) atmSubmit.addEventListener('click', doATMAction);

    // Shopping Game
    const shopTotal = document.getElementById('shop-total'), shopItems = document.getElementById('shop-items'), shopCart = document.getElementById('shop-cart'), shopFeedback = document.getElementById('shop-feedback'), shopCheck = document.getElementById('shop-check');
    let budget = 5000, cartTotal = 0, cartItems = [];
    const shoppingProducts = [{ name: 'Apple', price: 125 }, { name: 'Bread', price: 299 }, { name: 'Milk', price: 449 }, { name: 'Eggs', price: 399 }, { name: 'Cheese', price: 549 }, { name: 'Chips', price: 349 }, { name: 'Juice', price: 299 }, { name: 'Cereal', price: 499 }];
    function initShoppingGame() {
      shopItems.innerHTML = '';
      shoppingProducts.forEach(product => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'bg-slate-700 hover:bg-slate-600 rounded-lg p-3 text-center transition';
        btn.innerHTML = `<p class="text-slate-100 font-medium">${product.name}</p><p class="text-emerald-400 text-sm">$${(product.price / 100).toFixed(2)}</p>`;
        btn.addEventListener('click', () => { cartItems.push(product); cartTotal += product.price; updateCartDisplay(); });
        shopItems.appendChild(btn);
      });
    }
    function updateCartDisplay() {
      shopTotal.textContent = '$' + (cartTotal / 100).toFixed(2);
      shopCart.innerHTML = cartItems.length === 0 ? '<p class="text-slate-500 italic">Cart is empty</p>' : cartItems.map(item => `<span class="inline-block bg-slate-700 rounded px-2 py-1 text-xs mr-1 mb-1">${item.name}</span>`).join('');
      shopTotal.className = cartTotal > budget ? 'text-2xl font-bold text-rose-400' : 'text-2xl font-bold text-slate-200';
    }
    function checkCart() {
      if (cartItems.length === 0) { shopFeedback.textContent = 'Cart is empty!'; shopFeedback.className = 'mb-4 p-3 rounded-lg bg-amber-900/50 text-amber-300 font-semibold'; }
      else if (cartTotal <= budget) { shopFeedback.textContent = `Great! $${((budget - cartTotal) / 100).toFixed(2)} to spare!`; shopFeedback.className = 'mb-4 p-3 rounded-lg bg-emerald-900/50 text-emerald-300 font-semibold'; }
      else { shopFeedback.textContent = `$${((cartTotal - budget) / 100).toFixed(2)} over budget!`; shopFeedback.className = 'mb-4 p-3 rounded-lg bg-rose-900/50 text-rose-300 font-semibold'; }
      shopFeedback.classList.remove('hidden');
    }
    if (shopCheck) shopCheck.addEventListener('click', checkCart);
    initShoppingGame();

    // Quizzes
    const quizAnswers = { 'debit-trainer': { 'dc-1': 'B', 'dc-2': 'B', 'dc-3': 'B' }, 'secure-usage': { 'su-1': 'B', 'su-2': 'B' } };
    document.querySelectorAll('.quiz-check').forEach(btn => {
      btn.addEventListener('click', () => {
        const quizId = btn.dataset.quizId;
        const section = document.getElementById(quizId);
        const answers = quizAnswers[quizId];
        if (!section || !answers) return;
        let correct = 0, total = Object.keys(answers).length, allAnswered = true;
        Object.entries(answers).forEach(([qId, correctAnswer]) => {
          const optionsDiv = section.querySelector(`[data-question-id="${qId}"]`);
          if (!optionsDiv) return;
          const selectedInput = optionsDiv.querySelector('input:checked');
          const labels = optionsDiv.querySelectorAll('label');
          labels.forEach(l => l.classList.remove('correct', 'incorrect'));
          if (!selectedInput) { allAnswered = false; return; }
          if (selectedInput.value === correctAnswer) { correct++; selectedInput.parentElement.classList.add('correct'); }
          else { selectedInput.parentElement.classList.add('incorrect'); labels.forEach(l => { if (l.querySelector('input')?.value === correctAnswer) l.classList.add('correct'); }); }
        });
        const feedbackId = quizId === 'debit-trainer' ? 'debit-feedback' : 'secure-feedback';
        const feedbackEl = document.getElementById(feedbackId);
        if (feedbackEl) {
          feedbackEl.classList.remove('hidden');
          if (!allAnswered) { feedbackEl.textContent = 'Answer all questions first.'; feedbackEl.className = 'mt-4 p-3 rounded-lg bg-amber-900/50 text-amber-300 font-semibold'; }
          else if (correct === total) { feedbackEl.textContent = 'Perfect!'; feedbackEl.className = 'mt-4 p-3 rounded-lg bg-emerald-900/50 text-emerald-300 font-semibold'; }
          else { feedbackEl.textContent = `${correct}/${total} correct.`; feedbackEl.className = 'mt-4 p-3 rounded-lg bg-amber-900/50 text-amber-300 font-semibold'; }
          section.querySelectorAll('input[type="radio"]').forEach(i => i.disabled = true);
        }
      });
    });
  </script>

  <script>
    window.addEventListener("DOMContentLoaded", function () {
      const views = Array.from(document.querySelectorAll("[data-view]"));
      if (!views.length) return;
      function showView(name) { views.forEach(s => { s.classList.toggle("hidden", s.dataset.view !== name); }); window.scrollTo({ top: 0, behavior: "smooth" }); }
      views.forEach(s => { if (s.dataset.view !== "menu") s.classList.add("hidden"); });
      document.addEventListener("click", function (e) {
        const navBtn = e.target.closest("[data-view-target]");
        if (navBtn) { showView(navBtn.dataset.viewTarget); return; }
        if (e.target.closest(".back-to-menu")) showView("menu");
      });
    });
  </script>
</body>
</html>
